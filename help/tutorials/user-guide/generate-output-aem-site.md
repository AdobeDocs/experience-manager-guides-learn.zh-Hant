---
title: AEM網站
description: 了解如何AEM Site
source-git-commit: 23d6c87b525f0763990166e46f4bd4ac2d6e7cd5
workflow-type: tm+mt
source-wordcount: '2545'
ht-degree: 0%

---


# AEM網站 {#id205BE3008SW}

下列選項適用於AEM Site輸出：

您可以透過兩種方式建立AEM網站預設集：

**從Web編輯器：** 在「儲存庫」面板中，在「映射視圖」中開啟DITA映射檔案，然後在「輸出」頁簽中，選擇+表徵圖以建立輸出預設集，然後在「添加預設集」對話框中的「類型」下拉清單中選擇AEM Site。在Web編輯器中，配置已在「常規」和「高級」頁簽下組織：

**一般**

此 **一般** 標籤包含下列設定：

- 網站名稱
- 輸出路徑
- 現有輸出頁
- 刪除孤立的網頁
- 使用\（如果已為對應定義條件\）套用條件
- 使用基線\（如果為映射建立了基線\）
- 產生後的工作流程

**進階**

「進階」標籤包含下列設定：

- 清除DITA-OT臨時檔案
- 為每個主題生成單獨的PDF
- 使用映射屬性作為預設

如需詳細資訊，請參閱 [AEM網站設定](#id231KIM004X1).

**從地圖控制面板**

若要開啟AEM Site的輸出預設集，請從資產UI按一下DITA映射檔案，然後按一下輸出預設集，然後按一下AEM Site輸出選項。在映射控制面板中，按一下 **編輯** 在頂端以更新各種設定，然後按一下 **儲存**.

>[!TIP]
>
> 請參閱 *AEM網站發佈* 最佳作法指南中關於建立AEM網站輸出的最佳作法一節。

## AEM網站設定 {#id_aem_site_config}

下列選項適用於AEM Site輸出：

| AEM網站選項 | 說明 |
| --- | --- |
| 輸出類型 | 要生成的輸出類型。 若要產生回應式AEM網站輸出，請選擇AEM網站選項。 |
| 設定名稱 | 為您建立的AEM網站設定指定描述性名稱。 例如，您可以指定 *內部客戶輸出* 或 *最終用戶輸出*. |
| 網站名稱 | 輸出儲存在AEM存放庫的網站名稱。<br><br>系統會以此處指定的名稱建立AEM存放庫中的節點。 如果未指定站點名，則會使用DITA映射檔案名建立站點節點。<br><br>您在此指定的網站名稱也會作為瀏覽器標籤的標題。<br><br>您也可以在設定網站名稱時使用變數。 如需使用變數的詳細資訊，請參閱 [使用變數設定「目標路徑」、「站點名稱」或「檔案名稱」選項](generate-output-use-variables.md#id18BUG70K05Z). |
| 設計 | 選取要用於生成輸出的設計模板。<br><br>如需如何使用自訂設計範本產生輸出的詳細資訊，請連絡您的發佈管理員。 |
| 目的地路徑 | 儲存輸出的AEM存放庫內的路徑。 在產生最終輸出時，會結合「網站名稱」和「目的地路徑」。 例如，如果您將網站名稱指定為 `user-guide` 和目標路徑為 `/content/output/aem-guides`，則最終輸出會在 `/content/output/aem-guides/user-guide` 節點。<br><br>您也可以在設定目的地路徑時使用變數。 如需使用變數的詳細資訊，請參閱 [使用變數設定「目標路徑」、「站點名稱」或「檔案名稱」選項](generate-output-use-variables.md#id18BUG70K05Z). |
| 使用 | 選取下列其中一個選項：<br><br>**未應用**:如果您不想對已發佈的輸出套用任何條件，請選取此選項。<br>**DITAVal檔案**:選擇DITAVal檔案以生成條件化內容。 可以使用瀏覽對話框或鍵入檔案路徑來選擇多個DITAVal檔案。 使用檔案名稱附近的交叉圖示加以移除。 DITAVal檔案按指定的順序計算，因此第一個檔案中指定的條件優先於後一個檔案中指定的匹配條件。 您可以新增或刪除檔案，以維護檔案順序。 如果DITAVal檔案被移動到其他位置或被刪除，則不會從映射儀表板中自動刪除該檔案。 您必須更新位置，才能移動或刪除檔案。 您可以將滑鼠移至檔案名稱上方，查看儲存檔案之AEM存放庫的路徑。 只能選擇DITAVal檔案，如果選擇任何其他檔案類型，則會顯示錯誤。<br>**條件預設集**:從下拉式清單中選取條件預設集，以在發佈輸出時套用條件。 如果已添加DITA映射檔案的條件，則此選項可見。 條件設定在DITA映射控制台的「條件預設集」頁簽中可用。 若要深入了解條件預設，請參閱 [使用條件預設集](generate-output-use-condition-presets.md#id1825FL004PN). |
| 現有輸出頁 | 選取 **覆寫內容** 選項覆寫現有頁面中的內容。 此選項只會覆寫頁面內容與標題節點底下的內容。 此選項可啟用混合式發佈內容。 選擇此選項可提供從已發佈輸出中選擇刪除孤立頁面的選項。 這也是 *預設* 選項，以建立AEM Site輸出。<br><br>選取 **刪除和建立** 選項，以在發佈期間強制刪除任何現有頁面。 此選項會刪除頁面節點及其內容以及其下的所有子頁面。 如果您已變更輸出預設集的設計範本，或想要移除目標中已存在的任何額外頁面，請使用此選項。 |
| 刪除孤立的網頁 | 選取 **覆寫內容** 在 **現有輸出頁** 設定會顯示此選項。 如果您選取此選項，則會從已發佈的AEM網站中刪除所有孤立頁面。 若要成功執行此功能，您必須發佈整個DITA映射，而不要使用增量發佈。<br><br>假設您已發佈DITA映射，其中包含a.dita、b.dita和c.dita主題。 再次發佈對應之前，您已從對應中移除b.dita主題。 現在，如果您已選取此選項，則與b.dita相關的所有內容會從AEM網站輸出中移除，且只會發佈a.dita和c.dita。<br><br>此功能不會移除任何已發佈的子地圖。 例如，如果父映射包含子映射，而您刪除了整個子映射，則子映射內容不會從已發佈的輸出中刪除。 不過，如果您從子地圖中移除任何主題並重新發佈，則移除的主題內容會從網站輸出中刪除。<br><br>此外，如果有任何參考內容，且該內容在重新發佈前已移除，則不會移除參考內容的資料。<br><br>**附註**:在輸出生成日誌中也會捕獲有關已刪除孤立頁面的資訊。 有關訪問日誌檔案的詳細資訊，請參見 [檢視並檢查記錄檔](generate-output-basic-troubleshooting.md#id1821I0Y0G0A__id1822G0P0CHS). |
| 清除DITA-OT臨時檔案 | 選擇此選項可清除DITA-OT生成的臨時檔案。 在輸出生成日誌中可找到DITA-OT儲存臨時檔案的位置。<br><br>如果您在透過DITA-OT產生輸出時遇到錯誤，您可以取消選取此選項以保留暫時檔案。 然後，您可以使用這些檔案來疑難排解輸出產生錯誤。 |
| 為每個主題生成單獨的PDF | 如果選中此選項，則還會為DITA映射中的每個主題建立PDF。 選擇此選項時，將顯示新的「拆分PDF路徑」選項。<br><br>在「分割PDF路徑」欄位中，指定要儲存為每個主題產生的PDF的路徑。<br><br>**附註**:AEM參考線使用名為pdfx的DITA-OT外掛程式，為每個主題產生PDF。 此外掛程式與現成可用的DITA-OT套件捆綁。 您可以自訂此外掛程式，以根據您的需求產生PDF。 如果您使用自訂DITA-OT外掛程式，請務必整合pdfx外掛程式，以具備主題層級的PDF產生功能。 |
| 運行生成後工作流 | 選擇此選項後，會顯示新的「產生後的工作流程」下拉式清單，其中包含AEM中設定的所有工作流程。 您必須選取要在完成輸出產生工作流程後執行的工作流程。 |
| 使用基線 | 如果已為所選DITA映射建立基線，請選擇此選項以指定要發佈的版本。<br><br>**重要**:當您為AEM Site生成增量輸出時，將使用當前版本的檔案而不是附加的基線來建立輸出。<br><br>請參閱 [使用基線](generate-output-use-baseline-for-publishing.md#id1825FI0J0PF) 以取得更多詳細資訊。 |
| 屬性 | 選取您要以中繼資料處理的屬性。 這些屬性是從DITA映射或書籤映射檔案的「屬性」頁設定的。 您從下拉式清單中選取的屬性會列在「屬性」欄位下方，並從下拉式清單中移除。<br><br>**附註**:中繼資料屬性區分大小寫。<br><br>*如果已選取基線，則屬性的值將基於所選基線的版本。<br>* 如果尚未選擇基線，則屬性的值將基於最新版本。<br><br>您也可以使用DITA-OT發佈，將中繼資料傳遞至輸出。 如需更多詳細資訊，請參閱 [使用DITA-OT將中繼資料傳遞至輸出](pass-metadata-dita-ot.md#id21BJ00QD0XA).<br><br>**附註**:如果您尚未定義 `cq:tags` 在「屬性」選項中，然後 `cq:tags` 即使您已選取要發佈的基線，系統仍會從目前的工作副本中挑選基準。 |
| 如果主題上缺少映射屬性，則使用映射屬性 | 如果選中，則為映射檔案定義的屬性也會複製到未定義此類屬性的主題中。 使用此選項時，請考量下列幾點：<br><br>*只能將字串、日期或長（單值和多值）屬性傳遞至AEM網站頁面。<br>* 字串類型屬性的中繼資料值不支援任何特殊字元(例如 `@, #, " "`)。<br>*此選項應與 `Properties` 選項。 |

## AEM Site的其他附註

### 從Web編輯器生成基於文章的輸出

您可以從Web編輯器為一或多個主題或整個DITA映射生成AEM Site輸出。 您需要為DITA映射建立輸出預設集，然後便可輕鬆為映射生成AEM Site輸出。 如果您已更新地圖中的幾個主題，您也只能從網頁編輯器為這些主題產生AEM網站輸出。 如需詳細資訊，請參閱 [從網頁編輯器發佈以文章為基礎](web-editor-article-publishing.md#id218CK0U019I).

### 從其他映射生成輸出連結主題

將大量檔案集分散在多個資料夾和DITA映射中是很常見的案例。 發佈從不同位置連結的內容會變得極為複雜。 依預設，所有連結 `<xref>` 是使用建立 `local` `@scope`. 發佈此類主題不會涉及任何挑戰，因為它使用指向主題的直接連結。 如果主題位於目前DITA對應之外，連結不會顯示連結的內容。

另一種連結內容的方式是使用 `peer` `@scope`. 對於此類內容，從DITA映射的發佈上下文中選擇連結主題的配置上下文，即可在運行時解析連結。 以下螢幕截圖顯示具有 `peer` `@scope`:

![](images/peer-link-scope-link.png){width="800" align="left"}

為了簡化複雜地圖和連結至其他地圖中其他主題的主題的發佈，AEM指南可讓您為每個輸出預設集設定發佈內容。

發佈內容可讓您指定必須使用哪個主題，從哪個對應發佈特定輸出。 讓我們透過一個範例來了解這點 — 假設您有四個資料夾：樣本a、樣本b、樣本c和樣本d。每個資料夾都包含DITA映射 — DITA映射A、DITA映射B、DITA映射C和DITA映射D。當DITA映射A中的主題連結到DITA映射B、C或D中的主題時，將發生交叉映射連結。在下面的螢幕截圖中，示例概念主題包含指向其他DITA映射的一部分的檔案的連結\（或引用\）。

![](images/sample-concept-link-to-other.png){width="450" align="left"}

現在，當您為包含此主題的對映檔案配置AEM Site發佈設定時，可以選取發佈時要使用連結內容的發佈內容。 發佈內容是DITA映射及其輸出預設集的組合。 輸出預設集則包含特定版本的內容和條件預設集。 DITA映射、輸出預設集、\（檔案\）版本和條件的這整個組合定義連結映射的發佈上下文。

執行下列步驟以指定跨連結檔案的發佈內容：

1. 開啟 **輸出預設集** 要發佈的DITA映射的索引標籤。

1. 選取 **AEM網站** 輸出預設集。

   您會取得「AEM預設集設定」和「發佈內容」標籤。

   ![](images/aem-site-publish-settings.png){width="800" align="left"}

1. 開啟 **發佈內容** 標籤。

   畫面會顯示相依主題的清單。 這些是從當前映射中的某個主題連結的主題，但在某些其他DITA映射中可用。

   >[!NOTE]
   >
   > 「發佈內容」索引標籤會顯示使用 `peer` `@scope` 只有。 若為連結，則 `local` `@scope`，您不需要指定發佈內容。

   依預設，所有連結的主題都已選取其最新的輸出預設集和地圖。

   ![](images/default-publish-context.png){width="800" align="left"}

1. 要更改DITA映射和預設集的預設選擇，請按一下 **編輯** \（在主工具列\中）。

1. 如果要使用地圖中每個相依檔案最近發佈的輸出，請選擇 **對所有相依主題使用最近生成的發佈上下文**.

1. 在 **上層圖** 下拉清單中，選擇要連結當前映射輸出的映射檔案。

   選取對應檔案時，地圖的UUID會顯示在「上層對應UUID」欄中。 與所選映射關聯的輸出預設集將列在父映射的預設集清單中。

1. 在 **父地圖的預設集** 下拉式清單，選取您要連結目前地圖輸出的輸出預設集。

1. 為所有相依主題選擇所需的映射及其輸出預設，然後按一下 **完成**.

   相依主題的內容現在已設定。 您可以為目前地圖產生輸出。 有關生成輸出的詳細資訊，請參見 [從映射控制台生成DITA映射的輸出](generate-output-for-a-dita-map.md#).

### 混合發佈

AEM指南支援在您現有的AEM網站中發佈DITA內容。 例如，如果您有現有網站，則可以使用AEM網站輸出，僅發佈該網站上的DITA內容。 在此程式中，發佈程式不會修改現有的非DITA內容。 有關將您的網站設定為僅發佈DITA內容的詳細資訊，請與發佈管理員聯繫。

### 發佈 `conref`

如果您使用 `conref` 在您的內容中，則會以一般或內嵌內容發佈，並搭配來源\（或反向連結\）主題中的內容。 此 `conref` 內容會與主要內容一併呈現，不會為此建立任何個別網站頁面。 搜尋 `conref`，則僅限包含的主題或頁面 `conref` 內容會顯示在搜尋結果中。

>[!NOTE]
>
>若您已為 `conref` 使用AEM指南3.5版或更舊版本的內容，則建議使用來清除/刪除這些頁面 [刪除孤立的網頁](#delete-orphan-page-aem-site) 選項。


### 在內容內搜尋字串

您可以在AEM Site輸出中搜尋字串。 依預設，您只能搜尋標題中的字串。 若要搜尋內容或AEM網站輸出內文中的字串，請連絡您的系統管理員以啟用flatping.enabled屬性。


<img src="images/aem-output-search.png" alt="搜尋AEM網站輸出" width="800">

如需更多詳細資訊，請參閱 *設定AEM Site節點結構的平面化* 安裝及設定Adobe Experience Manager指南中的一節。

**上層主題：**[&#x200B;了解輸出預設集](generate-output-understand-presets.md)